"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["resources_js_components_modal_vue"],{"./resources/js/components/modal.vue":
/*!*******************************************************!*\
  !*** ./resources/js/components/modal.vue + 6 modules ***!
  \*******************************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ modal)\n});\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.esm-bundler.js\nvar vue_esm_bundler = __webpack_require__("./node_modules/vue/dist/vue.esm-bundler.js");\n;// CONCATENATED MODULE: ./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0]!./resources/js/components/modal.vue?vue&type=template&id=478d961c&scoped=true\n\n\nconst _withId = /*#__PURE__*/(0,vue_esm_bundler.withScopeId)("data-v-478d961c");\n\nconst render = /*#__PURE__*/_withId((_ctx, _cache, $props, $setup, $data, $options) => {\n  const _component_el_transfer = (0,vue_esm_bundler.resolveComponent)("el-transfer");\n\n  const _component_el_dialog = (0,vue_esm_bundler.resolveComponent)("el-dialog");\n\n  return (0,vue_esm_bundler.openBlock)(), (0,vue_esm_bundler.createBlock)(_component_el_dialog, {\n    title: "Ingredients",\n    modelValue: _ctx.modal,\n    "onUpdate:modelValue": _cache[3] || (_cache[3] = $event => _ctx.modal = $event)\n  }, {\n    default: _withId(() => [(0,vue_esm_bundler.createVNode)(_component_el_transfer, {\n      modelValue: _ctx.rightValues,\n      "onUpdate:modelValue": _cache[2] || (_cache[2] = $event => _ctx.rightValues = $event),\n      style: {\n        "text-align": "left",\n        "display": "inline-block"\n      },\n      titles: [\'All ingredients\', \'Ingredients \' + _ctx.capital(_ctx.foodName)],\n      "button-texts": [\'Remove\', \'Add\'],\n      format: {\n        noChecked: \'${total}\',\n        hasChecked: \'${checked}/${total}\'\n      },\n      data: _ctx.data,\n      onChange: _ctx.handleChange\n    }, {\n      default: _withId(({\n        option\n      }) => [(0,vue_esm_bundler.createVNode)("span", null, (0,vue_esm_bundler.toDisplayString)(option.name), 1\n      /* TEXT */\n      ), (0,vue_esm_bundler.withDirectives)((0,vue_esm_bundler.createVNode)("input", {\n        onChange: _cache[1] || (_cache[1] = (...args) => _ctx.handleUpdate && _ctx.handleUpdate(...args)),\n        type: "number",\n        "onUpdate:modelValue": $event => _ctx.quantity[option.key] = $event,\n        class: "quantity-input"\n      }, null, 40\n      /* PROPS, HYDRATE_EVENTS */\n      , ["onUpdate:modelValue"]), [[vue_esm_bundler.vModelText, _ctx.quantity[option.key]]])]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , ["modelValue", "titles", "data", "onChange"])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , ["modelValue"]);\n});\n;// CONCATENATED MODULE: ./resources/js/components/modal.vue?vue&type=template&id=478d961c&scoped=true\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm-bundler.js\nvar vuex_esm_bundler = __webpack_require__("./node_modules/vuex/dist/vuex.esm-bundler.js");\n;// CONCATENATED MODULE: ./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/dist/index.js??ruleSet[0]!./resources/js/components/modal.vue?vue&type=script&lang=js\n\n\n/* harmony default export */ const modalvue_type_script_lang_js = ((0,vue_esm_bundler.defineComponent)({\n  props: [\'dialog\', \'itemId\', \'food\', \'group\', \'data\'],\n  emits: [\'modal\'],\n\n  setup(props, context) {\n    const store = (0,vuex_esm_bundler.useStore)();\n    const dialog = (0,vue_esm_bundler.computed)(() => props.dialog);\n    const modal = (0,vue_esm_bundler.ref)(dialog.value);\n    const data = (0,vue_esm_bundler.computed)(() => props.data);\n    const foodName = (0,vue_esm_bundler.computed)(() => props.food);\n    const itemId = (0,vue_esm_bundler.computed)(() => props.itemId);\n    const quantity = (0,vue_esm_bundler.ref)({});\n    const ingredients = (0,vue_esm_bundler.computed)(() => store.state.food_ingredients); // const right = computed(() => ingredients.value.map((item) => {return {key:item.id,name:Object.values(data.value.find((elem) => elem.key === item.ingredient_id))[1]}}));\n\n    const right = (0,vue_esm_bundler.computed)(() => ingredients.value.map((item, index) => item.ingredient_id));\n    const left = (0,vue_esm_bundler.computed)(() => ingredients.value.filter(item => !data.value.some(elem => elem.key !== item.ingredient_id)));\n    const rightValues = (0,vue_esm_bundler.ref)([]);\n    (0,vue_esm_bundler.watch)(() => right.value, (n, o) => {\n      if (n !== o) {\n        rightValues.value = n;\n      }\n    });\n    (0,vue_esm_bundler.watch)(() => itemId.value, (n, o) => {\n      if (n !== o) {\n        if (itemId.value) {\n          store.dispatch(\'getFoodIngredients\', {\n            food_id: itemId.value\n          }).then(() => {\n            ingredients.value.map(item => quantity.value[item.ingredient_id] = item.quantity);\n          });\n        }\n      }\n    });\n\n    const handleChange = (value, direction, movedKeys) => {\n      let data = {};\n      data[\'ingredients\'] = quantity.value;\n      data[\'food_id\'] = props.itemId;\n\n      if (direction === \'right\') {\n        store.dispatch(\'setFoodIngredient\', data);\n      } else {\n        store.dispatch(\'deleteFoodIngredient\', data);\n      }\n    };\n\n    const handleUpdate = () => {\n      let data = {};\n      data[\'ingredients\'] = quantity.value;\n      data[\'food_id\'] = props.itemId;\n      let bool = right.value.find((elem, i) => Object.keys(quantity.value)[i]);\n\n      if (bool) {\n        store.dispatch(\'updateFoodIngredient\', data);\n      }\n    };\n\n    const openDialog = () => {\n      modal.value = true;\n    };\n\n    (0,vue_esm_bundler.watch)(() => dialog.value, (n, o) => {\n      if (n !== o) {\n        modal.value = n;\n      }\n    });\n    (0,vue_esm_bundler.watch)(() => modal.value, (n, o) => {\n      if (n !== o) {\n        context.emit(\'modal\', n);\n      }\n    });\n\n    const capital = text => {\n      return text.charAt(0).toUpperCase() + text.slice(1);\n    };\n\n    return {\n      dialog,\n      left,\n      right,\n      rightValues,\n      modal,\n      data,\n      foodName,\n      itemId,\n      quantity,\n      ingredients,\n      handleChange,\n      handleUpdate,\n      openDialog,\n      capital\n    };\n  }\n\n}));\n;// CONCATENATED MODULE: ./resources/js/components/modal.vue?vue&type=script&lang=js\n \n;// CONCATENATED MODULE: ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/vue-loader/dist/index.js??ruleSet[0]!./resources/js/components/modal.vue?vue&type=style&index=0&id=478d961c&scoped=true&lang=scss\n// extracted by mini-css-extract-plugin\n\n;// CONCATENATED MODULE: ./resources/js/components/modal.vue?vue&type=style&index=0&id=478d961c&scoped=true&lang=scss\n\n;// CONCATENATED MODULE: ./resources/js/components/modal.vue\n\n\n\n\n;\nmodalvue_type_script_lang_js.render = render\nmodalvue_type_script_lang_js.__scopeId = "data-v-478d961c"\n/* hot reload */\nif (false) {}\n\nmodalvue_type_script_lang_js.__file = "resources/js/components/modal.vue"\n\n/* harmony default export */ const modal = (modalvue_type_script_lang_js);\n\n//# sourceURL=webpack:///./resources/js/components/modal.vue_+_6_modules?')}}]);